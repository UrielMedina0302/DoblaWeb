<div class="container">
  <h2>Establecer Nueva Contraseña</h2>
  
  <form (ngSubmit)="onSubmit()" *ngIf="!message; else successMessage">
    <div *ngIf="!token" class="error-message">
      Token no válido o faltante
    </div>

    <div class="form-group" *ngIf="token">
      <label for="newPassword">Nueva Contraseña:</label>
      <input type="password" id="newPassword" [(ngModel)]="newPassword" name="newPassword" required>
    </div>

    <div class="form-group" *ngIf="token">
      <label for="confirmPassword">Confirmar Contraseña:</label>
      <input type="password" id="confirmPassword" [(ngModel)]="confirmPassword" name="confirmPassword" required>
    </div>

    <div class="error-message" *ngIf="error">{{ error }}</div>
    
    <button type="submit" [disabled]="loading || !token">
      {{ loading ? 'Procesando...' : 'Cambiar Contraseña' }}
    </button>

    <div class="login-link">
      <a routerLink="/login">Volver al Login</a>
    </div>
  </form>

  <ng-template #successMessage>
    <div class="success-message">
      <p>{{ message }}</p>
      <p>Serás redirigido al login en 3 segundos...</p>
    </div>
  </ng-template>
</div>